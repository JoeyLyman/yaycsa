## Phase 0: Project Setup
- [x] Update SvelteKit packages (Svelte 5, Tailwind v4, shadcn-svelte)
- [x] Remove drizzle-orm, drizzle-kit, postgres packages
- [x] Remove drizzle.config.ts, src/lib/server/db/ (drizzle schema)
- [x] Remove supabase .env vars
- [x] Update Claude Code settings (copy useful permissions from djl project)

## Phase 1: Monorepo + Vendure Scaffold
- [x] Create apps/ directory structure
- [x] Move existing SvelteKit app into apps/storefront/
- [x] Scaffold Vendure server with `npx @vendure/create` (Postgres, skip Next.js storefront)
- [x] Set up workspace config at repo root (npm workspaces)
- [x] Verify both apps start with a single `dev` command
- [x] Set up Supabase dev project and configure DB connection

## Phase 2: Vendure Configuration
- [ ] Add custom fields to vendure-config.ts (Order, OrderLine, Customer, ProductVariant)
- [ ] Create customer groups (restaurant, coop, grocery, distributor)
- [ ] Set up delivery routes (ShippingMethod or custom entity)
- [ ] Evaluate pricing strategy: ProductVariantPriceCalculationStrategy vs custom plugin entity for quantity breaks
- [ ] Run initial migration with custom fields
- [ ] Seed products, customers, delivery options via Admin API

## Phase 3: Order Intake Plugin
- [ ] Scaffold order-intake plugin with Vendure CLI (`npx vendure add -p`)
- [ ] Add webhook endpoint (POST /order-intake/webhook) for n8n
- [ ] Implement customer email matching logic
- [ ] Implement product name fuzzy matching logic
- [ ] Implement draft order creation (using Vendure's draft order API)
- [ ] Add custom GraphQL extensions for intake UI queries
- [ ] Implement custom pricing calculation strategy

## Phase 4: SvelteKit Intake UI
- [ ] Set up GraphQL client (Houdini or similar) connected to Vendure Admin API
- [ ] Build dashboard / draft order queue page
- [ ] Build order intake review UI (side-by-side: raw email vs parsed order)
- [ ] Build order line editing (product search, quantity, price recalculation)
- [ ] Build customer/delivery dropdowns
- [ ] Build confirm/reject actions
- [ ] Build orders list page (filterable by status)
- [ ] Build customer management pages
- [ ] Build product/pricing management pages

## Phase 5: n8n Integration
- [ ] Set up email trigger (Outlook)
- [ ] Set up LLM node (Claude API) with parsing prompt
- [ ] Connect to order-intake webhook
- [ ] Set up order confirmation → email flow
- [ ] Test end-to-end: email → parsed draft → review → confirm → confirmation email

## Phase 6: Polish & Extras
- [ ] Google Sheets export (plugin or n8n flow)
- [ ] Error handling & edge cases
- [ ] Auth for the SvelteKit admin UI
